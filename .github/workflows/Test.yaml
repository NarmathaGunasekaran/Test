name: Dynatrace Test Event

on:
  workflow_dispatch:   # allows manual trigger

jobs: 
  send-event:
    runs-on: ubuntu-latest
    steps:
      - name: Send test event to Dynatrace
        run: |
          curl -X POST \
            https://jvc12148.apps.dynatrace.com/ui/apps/dynatrace.classic.logs.events/ingest \
            -H "Authorization: Api-Token ${{ secrets.DT_API_TOKEN }}" \
            -H "Content-Type: application/json" \
            -d '{
                  "eventType": "CUSTOM_DEPLOYMENT",
                  "title": "GitHub â†’ Dynatrace Test",
                  "properties": {
                    "repository": "${{ github.repository }}",
                    "workflow": "${{ github.workflow }}",
                    "run_id": "${{ github.run_id }}",
                    "status": "success"
                  }
                }'
